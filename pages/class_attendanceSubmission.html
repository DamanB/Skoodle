<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="/css/generic.css">
        <link rel="stylesheet" href="/css/main.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script type='text/javascript' src="/js/classes.js"></script>
        <script type='text/javascript' src="/js/data.js"></script>
        <title>Skoodle: Class Attendance Submission</title>
    </head>
    
    <body>
        <script>
            var user;
            
            //set header
            $(document).ready(function () {
                user = Object.assign(new Admin, getActiveUser());
                $("#username").text(user.type.toUpperCase() + ": " + user.username);
                $("#name").text("Hello " + user.name + "!");
            
                
                //Get modify data
                toEdit = JSON.parse(sessionStorage.getItem("ViewAttendance"));
                console.log(toEdit);
                $("#className").text(toEdit.name);

                var list = toEdit.ClassList;

                list.forEach(function(studentObj)
                {
                    $("#listOfStudents tbody").append
                    (
                        "<tr><td>"
                        + studentObj.name
                        + "</td><td>"
                        + "<select>"
                        + "<option value=A>Absent</option>"
                        + "<option value=P>Present</option>"
                        + "</select>"
                    )
                });
            });

            //Logout button
            $(document).on('click', "#logout", function(){
                removeActiveUser();
                window.location.href = "/index.html";
            });

            //Back button
            $(document).on('click', "#back", function()
            {
                console.log(user.type);
                if (user.type == "Teacher")
                {
                    window.location.href = "/pages/teach_full1.html";
                }

                if (user.type == "SupplyTeacher")
                {
                    window.location.href = "/pages/teach_supply1.html";
                }
            });
        </script>
        <div id="logo">
            Skoodle
        </div>
        <div class="nameLabel">
            <span id="username"></span><br>
            <span id="name"></span>
        </div>
        <div id="logout">
            <button>Logout</button>
        </div>

        <div id="back">
            <button style="color: black; text-decoration: none;">Back</button>
        </div>

        <div>
            <span>Attendance for: </span>
            <span id="className"></span>

            <table id="listOfStudents">
                <thead>
                    <th>Student Name</th>
                    <th>Attendance</th>
                </thead>

                <tbody></tbody>
            </table>
        </div>
    </body>
</html>